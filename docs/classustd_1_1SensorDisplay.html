<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>muwerk mupplet Sensor Library: ustd::SensorDisplay Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">muwerk mupplet Sensor Library
   </div>
   <div id="projectbrief">muwerk applets; mupplets: functional units that support specific hardware or reusable applications for sensors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ustd</b></li><li class="navelem"><a class="el" href="classustd_1_1SensorDisplay.html">SensorDisplay</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classustd_1_1SensorDisplay-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ustd::SensorDisplay Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>mupplet-sensor 128x64 oled display for sensor value monitoring  
 <a href="classustd_1_1SensorDisplay.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mup__oled_8h_source.html">mup_oled.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a361dbc7f6b6498ed30d1af3598573b1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1SensorDisplay.html#a361dbc7f6b6498ed30d1af3598573b1b">SensorDisplay</a> (String name, uint16_t screen_x, uint16_t screen_y, uint8_t i2c_address=0x3c, TwoWire *pWire=&amp;Wire)</td></tr>
<tr class="separator:a361dbc7f6b6498ed30d1af3598573b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >mupplet-sensor 128x64 oled display for sensor value monitoring </p>
<p >The mup_oled mupplet supports SSD1306 style 128x64 (or 128x32) OLED displays</p>
<p ><img src="https://github.com/muwerk/mupplet-sensor/blob/master/extras/oled.png" alt="" width="30%" height="30%" class="inline"/> Hardware: SSD1306 I2C Oled display.</p>
<h4>Sample code</h4>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ustd_platform.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;scheduler.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;net.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mqtt.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ota.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;jsonfile.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;mup_oled.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> appLoop();</div>
<div class="line"> </div>
<div class="line">ustd::Scheduler sched(10, 16, 32);</div>
<div class="line">ustd::Net net(LED_BUILTIN);</div>
<div class="line">ustd::Mqtt mqtt;</div>
<div class="line">ustd::Ota ota;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classustd_1_1SensorDisplay.html">ustd::SensorDisplay</a> display(<span class="stringliteral">&quot;display&quot;</span>, 128,64,0x3c);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    con.begin(&amp;sched);</div>
<div class="line">    net.begin(&amp;sched);</div>
<div class="line">    mqtt.begin(&amp;sched);</div>
<div class="line">    ota.begin(&amp;sched);</div>
<div class="line">    display.begin(&amp;sched,&amp;mqtt);</div>
<div class="line">    sched.add(appLoop, <span class="stringliteral">&quot;main&quot;</span>, 1000000);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> appLoop() {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Never add code to this loop, use appLoop() instead.</span></div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    sched.loop();</div>
<div class="line">}</div>
<div class="ttc" id="aclassustd_1_1SensorDisplay_html"><div class="ttname"><a href="classustd_1_1SensorDisplay.html">ustd::SensorDisplay</a></div><div class="ttdoc">mupplet-sensor 128x64 oled display for sensor value monitoring</div><div class="ttdef"><b>Definition:</b> mup_oled.h:76</div></div>
</div><!-- fragment --><p >The data area of the ESP32 or ESP8266 must contain a json file with the name of <a class="el" href="classustd_1_1SensorDisplay.html" title="mupplet-sensor 128x64 oled display for sensor value monitoring">SensorDisplay</a> Object given as first parameter to the object instantiation, "display" in the example above. The file <code>display.json</code> should contain:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;layout&quot;: &quot;L|SS&quot;,</div>
<div class="line">    &quot;formats&quot;: &quot;SFF &quot;,</div>
<div class="line">    &quot;topics&quot;: [&quot;clock/timeinfo&quot;, &quot;hastates/sensor/temperature/state&quot;, &quot;hastates/sensor/netatmo_temperature2/state&quot;],</div>
<div class="line">    &quot;captions&quot;: [&quot;Time&quot;, &quot;Out C&quot;, &quot;Studio C&quot;],</div>
<div class="line">}</div>
</div><!-- fragment --><p ><code>layout</code> contains two lines separated by |, L for one large display, SS for two small sensor displays: e.g. SS|SS, L|SS, SS|L, L|L. <code>topics</code> gives a list of MQTT topics that are going to be displayed. A layout L|SS has three display slots and requires 3 topics. A special topic <code>clock/timeinfo</code> is provided by this mupplet and displays day of week and time. <code>formats</code> defines how incoming MQTT messages are converted, one letter per display slot. 'S' simply displays the MQTT messages body as string. 'F' converts the message to float and formats it to 1 decimal. captions are the small-print titles for each display slot. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a361dbc7f6b6498ed30d1af3598573b1b" name="a361dbc7f6b6498ed30d1af3598573b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361dbc7f6b6498ed30d1af3598573b1b">&#9670;&nbsp;</a></span>SensorDisplay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ustd::SensorDisplay::SensorDisplay </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>screen_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>screen_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>i2c_address</em> = <code>0x3c</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TwoWire *&#160;</td>
          <td class="paramname"><em>pWire</em> = <code>&amp;Wire</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Instantiate an sensor display mupplet </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The display's <code>name</code>. A file <code>name</code>.json must exist in the format above to define the display slots and corresponding MQTT messages. </td></tr>
    <tr><td class="paramname">screen_x</td><td>Horizontal resolution, is currently always 128. </td></tr>
    <tr><td class="paramname">screen_y</td><td>Vertical resolution, is currently always 64, (maybe 32 works with format secifiers L or SS.) </td></tr>
    <tr><td class="paramname">i2c_address</td><td>i2c address of the SSD1306 display, usually 0x3c. </td></tr>
    <tr><td class="paramname">pWire</td><td>Pointer to a TwoWire i2c instance.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="mup__oled_8h_source.html">mup_oled.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
